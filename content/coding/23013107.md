---
id: '7'
name: '小工具筆記 -- vue3 tab'
date: '2023-01-31 21:58:29'
category: '程式語言'
tags: ['Nuxt3', 'front-end']
img: '/images/23013107/001.png'
description: 'vue3 簡單寫點動態切換的tab'
---

## Abstract 文章摘要

發現有些小功能很常用到，但是使用不同套件時未必都符合自己需求，每次想借一下自己以前寫過的版本
都還要花時間尋找，有點麻煩，所以把它的簡化版記錄下來。
<br/>
有需要的時候就可以很方便地使用這些原型，以下都是 vue v-for + js function 的版本，樣式的部分是求簡單快速，所以用 windi css
排版（箭頭是使用 vuetify 的），
跟使用 bootstrap 的方式類似，只是已經先寫好 class 的名稱，完全可以用自訂的 class 名稱與 style 取代。

<br/>

2023-04-26 更：[https://windicss.org/posts/sunsetting.html](https://windicss.org/posts/sunsetting.html) windi css
目前開發者公告不再維護!!!

## 一、 collapse 手風琴式 一次打開一個 tab，點擊打開的 tab 會關閉

先附上 code ↓ ↓ ↓

<br/>

```
<template>
  <div class="m-5 mx-auto">
    <ul
      class="flex justify-center align-center flex-wrap w-300px">
      <li
        v-for="(item, index) in 5"
        :key="item.id"
        class="mb-5">
        <button
          @click="open(index)"
          class="h-50px w-300px p3 rounded pb-1 tab-title bg-blue-lighten-1 flex justify-space-around align-center">
          <span> tab{{ index + 1 }}</span>
          <v-icon
            v-if="isOpen === index"
            start
            icon="mdi-arrow-up"></v-icon>
          <v-icon
            v-else
            start
            icon="mdi-arrow-down"></v-icon>
        </button>
        <div
          class="tab-content p-3 bg-blue-lighten-3 hidden"
          :class="{
            'is-active': isOpen === index
          }">
          Lorem ipsum dolor sit amet, consectetur
          adipisicing elit. Animi dicta dolorum
          eveniet harum hic in magnam, mollitia
          odio pariatur rem suscipit, totam
          voluptatibus! Dolorum incidunt ipsam
          ipsum magni odit porro.
        </div>
      </li>
    </ul>
  </div>
</template>

<script lang="ts" setup>
import { definePageMeta } from '#imports'

definePageMeta({
  layout: 'test'
})

let isOpen = ref(0)

function open(index: number) {
  if (index == isOpen.value) {
    isOpen.value = null
    return
  } else {
    isOpen.value = index
  }
}
</script>

<style>
.tab-content.is-active {
  display: block !important;
}
</style>

```

![img](/images/23013107/001.png)

<br/>

基本上就是多一個 **isOpen** 的參數預設為 0 ，以及一個 function **open(index)** 點擊當前 tab 時將 isOpen 變成該 index 值，
然後打開/關閉的樣式： arrow-up/down && content-display: none/block，綁上 v-bind:class="{ '添加的樣式名稱': 打開條件 }"。

<br/>

有個 UI 的小地方是，使用者習慣手風琴的設計"再點擊一次同 tab 會關起來"，所以才將 open 的 function 寫下來多個條件式，
不然的話，如果想要簡單地"點擊該 tab，isOpen 的值變成該 index 值"，例如： 以下第二種，tab 點擊頁籤式的，就可以直接在行內，將
isOpen 的值用@click 做切換。

<br/>

## 二、 tab 頁籤式 content 為同一塊動態切換內容

<br/>

```
<template>
  <div class="wrapper m-10 mx-auto">
    <div class="w-300px">
      <ul class="flex flex-md-row">
        <li
          v-for="(i, index) in 3"
          class="mr-2 p-2 bg-amber-accent-1"
          :class="{ 'bg-amber-accent-2  transform translate-y-1': index === isOpen }"
          @click="isOpen = index">
          <button>tab {{ index + 1 }}</button>
        </li>
      </ul>
      <div class="bg-amber-accent-2 h-300px p-2">
        <span v-if="isOpen === 0">
        content1 content1 content1 content1 content1 content1 content1 content1 content1
        </span>
        <span v-else-if="isOpen === 1">
        content2 content2 content2 content2 content2 content2 content2 content2 content2
        </span>
        <span v-else-if="isOpen === 2">
        content3 content3 content3 content3 content3 content3 content3 content3 content3
        </span>

      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>

const isOpen = ref(0)

</script>

```

![img](/images/23013107/002.png)

<br/>

這種頁籤式，切換的內容為同一區塊，依據點擊的 tab 切換 isOpen 值並同時換下面內容，然後再利用 v-bind:class="{ '
添加的樣式名稱': 打開條件 }"
做出打開的互動感覺。這裡要注意的地方是，如果是 v-for 出來的 index 值是從 0 開始。

<br/>

## 二、 router.link 根據 url 自動打開

```
<template>
  <div class="m-10 mx-auto">
    <div class="mx-auto w-300px">
      <ul class="flex flex-md-row">
        <li
          v-for="item in link"
          class="mr-2 p-2"
          :class="{ ' border-b border-blue-500 text-blue-500': currentRoute == item.href }">
          <NuxtLink :to="item.href">{{ item.name }}</NuxtLink>
        </li>
      </ul>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { definePageMeta } from '#imports'

definePageMeta({
  layout: 'test'
})

const link = ref([
  { name: 'testTab3', href: '/testTab3' },
  { name: 'testTab2', href: '/testTab2' },
  { name: 'testTab', href: '/testTab' }
])

const route = useRoute()
console.log(route)
const currentRoute = ref(route.href)
</script>

```

<br/>

![img](/images/23013107/003.png)


這個使用於導覽列，顯示使用者在哪個分頁上。在 nuxt3 中使用 useRoute()方法，可以 log 出目前網址的
href、params、query...等，所以直接利用這個方法 v-bind:class 在相符合的 route上。

<br/>

p.s. 如果遇到導覽列內容很多，需要把子導覽列收合起來：平常隱藏起來，點擊（或hover）再打開來，
並且當網址列在該子導覽列任一分頁時，此導覽列自動打開來的情況，也就是要辨認上一層資料夾的情況
就將route 以" / " split，如下↓

```
const route = useRoute()
const currentRoute = ref(route.href)
const currentRouteTitle = currentRoute.value.split('/')[1]
console.log(currentRouteTitle)
```

例如 pages/products/item1、pages/products/item2、pages/products/item3...都要打開，如圖↓

![img](/images/23013107/004.png)



平常submenu 為display="hidden"狀態，當currentRouteTitle === item.href 時，就v-bind:class="display: block"
